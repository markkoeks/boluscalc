<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bolus Calc</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
</head>
<body>
    <div class="container">
        <header>
            <h1>Bolus Calc</h1>
        </header>

        <section class="input-group">
            <div class="field">
                <label for="currentBg">Current BG (mmol/L)</label>
                <input type="number" id="currentBg" step="0.1" inputmode="decimal" autofocus>
            </div>
            <div class="field">
                <label for="carbs">Carbs (grams)</label>
                <input type="number" id="carbs" step="1" inputmode="numeric">
            </div>
        </section>

        <hr>

        <section class="settings-group">
            <div class="field-half">
                <label for="targetBg">Target BG</label>
                <input type="number" id="targetBg" step="0.1" inputmode="decimal">
            </div>
            <div class="field-half">
                <label for="isf">ISF (Drop per unit)</label>
                <input type="number" id="isf" step="0.1" inputmode="decimal">
            </div>
            <div class="field-half">
                <label for="carbRatio">Carb Ratio (g/u)</label>
                <input type="number" id="carbRatio" step="0.1" inputmode="decimal">
            </div>
        </section>

        <section class="carb-pad">
    <div class="pad-header">
        <span>Carb Tally: <strong id="tallyDisplay">0</strong>g</span>
        <div class="pad-controls">
            <button id="undoCarb" class="btn-sm">Undo</button>
            <button id="clearCarb" class="btn-sm btn-warn">Clear</button>
        </div>
    </div>
    
    <div class="pad-grid">
        <button type="button" class="add-btn" data-val="5">+5</button>
        <button type="button" class="add-btn" data-val="10">+10</button>
        <button type="button" class="add-btn" data-val="15">+15</button>
        <button type="button" class="add-btn" data-val="20">+20</button>
        <button type="button" class="add-btn" data-val="25">+25</button>
        <button type="button" class="add-btn" data-val="30">+30</button>
        <button type="button" class="add-btn sub" data-val="-5">-5</button>
        <button type="button" class="add-btn sub" data-val="-10">-10</button>
        
        <div class="custom-add">
            <input type="number" id="customCarb" placeholder="Custom" inputmode="numeric">
            <button id="addCustomBtn">Add</button>
        </div>
    </div>
    
    <button id="useTotalBtn" class="use-total-btn">Use Tally in Calculation</button>
</section>

        <section class="results">
            <div class="result-row">
                <span>Carb Bolus:</span> <span id="outCarb">0.00</span>
            </div>
            <div class="result-row">
                <span>Correction:</span> <span id="outCorr">0.00</span>
            </div>
            <div class="total-row">
                <strong>Total Dose:</strong> <strong id="outTotal">0.00</strong>
            </div>
            <div class="rounded-row">
                <span>Rounded (0.5):</span> <span id="outRounded">0.0</span>
            </div>
        </section>

        <section id="resultsSection" class="results">
    <div class="result-row">
        <span>Carb Bolus:</span> <span id="outCarb">0.00</span>
    </div>
    </section>

        <footer>
            <footer>
                <button id="resetBtn" class="reset-button">Reset All Settings</button>
                <p class="disclaimer">Calculation aid only. Not medical advice. Verify all doses.</p>
        </footer>
    </div>

    <script src="app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js');
        }
    </script>
</body>
</html>
